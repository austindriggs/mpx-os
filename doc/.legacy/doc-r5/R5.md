# R5 TODO LIST

Memory Management

## GOALS

- Implement a heap manager for dynamically allocating and deallocating memory in MPX
- Due to its complexity and ability to render MPX unusable, we’ll use a phased approach:
    - Implement the heap manager and test it via user commands (Phase 1)
    - Integrate the heap manager into MPX (Phase 2)


## FIX ANY BUGS FROM R3 and R4

- [x] alarm/help: Add help commands for alarm to help list and verbose - @nat00008
- [x] alarm: Add alarm to user guide - @CEdwards04 
- [x] load: Maybe add load confirmation commands  - @nat00008
- [x] version: hardcode R4 and update version latest to R5 - @austindriggs 

## PHASE 1:

### Implement the library functions and user commands

- Initialize your heap from kmain() (in the “Initializing MPX modules”
section): initialize_heap(50000);
- Test the heck out of the library functions using the user commands
- Check for memory leaks.

### Implement Library Functions and Structs

- [x] Memory Control Block - @nat00008 
- [x] void initialize_heap(size_t); 
- [x] Initialize the heap in kmain (50,000)
- [x] void *allocate_memory(size_t); @CEdwards04 
- [x] int free_memory(void *); @CEdwards04 

### Implement User Commands

- [x] Allocate Memory - @austindriggs 
- [x] Free Memory - @austindriggs 
- Show Allocated and Show Free Memory 
    - [x] show mcb - @DrZomboss123 
    - [x] show mcb allocated - @DrZomboss123 
    - [x] show mcb free - @DrZomboss123 
    - [x] show mcb <addr> - @austindriggs 
    - [x] show mcb help - @austindriggs 

### TAG THE GIT COMMIT

- [x] Tag the git commit with `R5-P1` when done with phase 1 - everyone!!!



## PHASE 2

### Important notes

- If any of your other modules require initialization from kmain(), that initialization MUST come AFTER you initialize your heap and replace the heap manager 
- Put another way, R5 MUST be the FIRST module you initialize 

### Implement

- [x] Initialize heap in kmain (big 50,000)
- [x] sys_set_heap_functions(allocate_memory, free_memory);
- [x] Replace the heap manager with ours.



## BONUS OPPORTUNITIES


- [x] Command History – At the moment, there is no functionality given to the up and down arrows. This add-on will give them something to do: Iterate through Command History. As you probably have figured out by now, while inside a UNIX terminal, you can use the arrow keys to populate the new line with a previously entered command. To complete this add-on, you must emulate that functionality. You will need to create a way to store previously entered commands in the proper order, have a way to iterate through them in both directions (up and down), and be able to populate the current line with the command from history. I recommend playing around with the UNIX terminal if you are having trouble understanding the functionality I explained above. Also limit the history to the last 5 commands issued in comhand - @austindriggs 


## DOCUMENTATION

### General

- [x] add all commands to the help message(s) - @austindriggs 
- [x] color code error messages and stuff - everyone
- [x] Add doxygen to all header files - everyone

### Docs
- [x] Regenerate the programmer guide - @austindriggs 
- [x] Regenerate user guide - @CEdwards04 
- [x] Add to R5 column in contributions file. - everyone


## DELIVERABLE

R5 is due Friday 11/21 by 8am. ONLY 1 team member need submit your code. Your will create a tag and release to freeze the existing R5 code for me to access and then you can continue development of R6

YOU MUST SUBMIT 2 DELIVERABLES FOR THIS MODULE

You will submit a TAG for part 1 which DOES NOT integrate your memory manager into your mpx but provides USER LEVEL commands inside your command handler to test your allocate and free operations as well as commands to print the allocated list and the free list.
You will submit a SECOND TAG with the allocate and free commands removed from comman handler, AND YOUR MEMORY MANAGER INTEGRATED INTO YOUR MPX. All existing commands from R1-R4 should still work as implemented. You MUST leave the show allocated and show free in the command handler for your instructor to assess your memory manager.
Remember to place a PDF of your user's manual and programmer's manual in the documents folder of your project.

You will submit the Links to your releases, which I will download and grade.
